webpackJsonp([9],{0:function(t,e,n){n("briU"),t.exports=n("NHnr")},"9Y0D":function(t,e){},F7NO:function(t,e,n){t.exports=n.p+"static/img/loading.2284def.gif"},"FF+y":function(t,e,n){t.exports=n.p+"static/img/error.7816e87.png"},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=n("MVMM"),a=n("zO6J"),u=n("rVsN"),c=n.n(u),i=n("aozt"),s=n.n(i),l=n("9rMa"),f=n("a3Yh"),p=n.n(f),d={state:{isShowSearch:!1},actions:{isShowSearch:function(t,e){(0,t.commit)("COM_IS_SHOW_SEARCH",e)}},getters:{isShowSearch:function(t){return t.isShowSearch}},mutations:p()({},"COM_IS_SHOW_SEARCH",function(t,e){t.isShowSearch=e})},m={state:{loginStatus:JSON.parse(localStorage.getItem("loginStatus"))||!1,token:localStorage.getItem("token"),user:""},actions:{setToken:function(t,e){var n=t.commit;console.log(e),localStorage.setItem("token",e),localStorage.setItem("loginStatus",!0),n("SET_TOKEN",e),n("SET_LOGIN_STATUS",!0)},setSignOut:function(t){var e=t.commit;localStorage.removeItem("loginStatus"),localStorage.removeItem("token"),e("SET_TOKEN",""),e("SET_LOGIN_STATUS",!1)}},getters:{getToken:function(t){return t.token},getLoginStatus:function(t){return t.loginStatus}},mutations:(o={},p()(o,"SET_TOKEN",function(t,e){t.token=e}),p()(o,"SET_LOGIN_STATUS",function(t,e){t.loginStatus=e}),o)},g=n("3cXf"),h=n.n(g),S=n("5VXh"),v=n.n(S),T={cartCount:0},_={getCartCount:function(t,e){(0,t.commit)("GET_CART_COUNT",e)},addToCar:function(t,e){var n=this,o=t.commit;if(!window.localStorage.getItem("token"))return P.push("/login"),!1;if(e.product.good_stock<=0)return!1;var r=this,a=[].concat(e.currentAttrs).concat(e.optionalAttrs),u=Number(e.num),c={product:P.currentRoute.params.id,property:h()(a),amount:u};E.AddCart(c).then(function(t){0==t.data.error_code?(Object(S.Message)({message:"已加入到购物车",type:"success",customClass:"com_tips"}),E.Cart().then(function(t){if(0==t.data.error_code){var e=t.data.goods_groups;e.forEach(function(t){r.state.cart.cartCount=t.total_amount})}}),o("GET_CART_COUNT",n.num+T.cartCount)):Object(S.Message)({message:t.data.error_desc,type:"warning",customClass:"com_tips"})})}},I=p()({},"GET_CART_COUNT",function(t,e){t.cartCount=e}),C={state:T,actions:_,getters:{goodsNumber:function(t){return t.cartCount}},mutations:I};r.default.use(l.a);var A=new l.a.Store({modules:{com:d,user:m,cart:C}});function w(t,e){return new c.a(function(n,o){s.a.post(t,e).then(function(t){n(t)}).catch(function(t){o(t)})})}s.a.defaults.timeout=5e3,s.a.defaults.baseURL=window.GLOBAL_CONFIG.API_HOST,s.a.defaults.headers.Accept="application/json, text/plain, */*",s.a.defaults.headers["content-Type"]="application/json",s.a.defaults.headers.common["X-ECAPI-UserAgent"]="Platform/Wechat",s.a.defaults.headers.common["X-ECAPI-UDID"]="null",s.a.defaults.headers.common["X-ECAPI-Ver"]="1.1.0",s.a.defaults.headers.common["X-ECAPI-Sign"]="null",s.a.interceptors.request.use(function(t){return t},function(t){return c.a.reject(t)}),s.a.interceptors.response.use(function(t){return t},function(t){return console.log("网络异常"),c.a.reject(t)});var E={Login:function(t){return w("/v2/ecapi.auth.signin",t)},Signup:function(t){return w("/v2/ecapi.auth.default.signup",t)},setHeader:function(t){s.a.defaults.headers.common["X-ECAPI-Authorization"]=t},Menus:function(t){return w("/v2/home.nav.list",t)},Cate:function(t){return w("/v2/ecapi.category.list",t)},Banner:function(t){return w("/v2/ecapi.banner.list",t)},RecommentProduct:function(t){return w("/v2/ecapi.home.product.list",t)},TypeList:function(t){return w("/v2/home.goods.list.type",t)},UserProtocol:function(t){return w("/v2/ecapi.site.get",t)},UserInfo:function(t){return w("/v2/ecapi.user.profile.get",t)},MobileVerify:function(t){return w("/v2/ecapi.auth.mobile.verify",t)},SendCode:function(t){return w("/v2/ecapi.auth.mobile.send",t)},ProductList:function(t){return w("/v2/ecapi.product.list",t)},ProductTypeList:function(t){return w("/v2/ecapi.type.product.list",t)},SearchKeyword:function(t){return w("/v2/ecapi.search.keyword.list",t)},ProductDetails:function(t){return w("/v2/ecapi.product.get",t)},AddCart:function(t){return w("/v2/ecapi.cart.add",t)},Cart:function(t){return w("/v2/ecapi.cart.get",t)}};r.default.use(a.a);var O=new a.a({routes:[{path:"/",alias:"/home",name:"Home",component:function(t){return Promise.all([n.e(0),n.e(2)]).then(function(){return t(n("zKIK"))}.bind(null,n)).catch(n.oe)}},{path:"/seller",name:"Seller",component:function(t){return Promise.all([n.e(0),n.e(6)]).then(function(){return t(n("Fht5"))}.bind(null,n)).catch(n.oe)}},{path:"/details/:id",name:"Details",component:function(t){return Promise.all([n.e(0),n.e(1)]).then(function(){return t(n("RzA3"))}.bind(null,n)).catch(n.oe)}},{path:"/product",name:"Product",component:function(t){return Promise.all([n.e(0),n.e(5)]).then(function(){return t(n("If12"))}.bind(null,n)).catch(n.oe)}},{path:"/login",name:"Login",meta:{requireAuth:!0},component:function(t){return Promise.all([n.e(0),n.e(4)]).then(function(){return t(n("W2Q3"))}.bind(null,n)).catch(n.oe)}},{path:"/register",name:"Register",component:function(t){return Promise.all([n.e(0),n.e(3)]).then(function(){return t(n("NTb/"))}.bind(null,n)).catch(n.oe)}},{path:"*",name:"Error",component:function(t){return n.e(7).then(function(){return t(n("reVr"))}.bind(null,n)).catch(n.oe)}}]});O.beforeEach(function(t,e,n){t.meta.requireAuth?A.getters.getToken?"/login"===t.path?n({path:"/",query:{redirect:t.fullPath}}):n():"/login"!==t.path?n({path:"/login",query:{redirect:t.fullPath}}):n():n()}),window.localStorage.getItem("token")&&(E.setHeader(window.localStorage.getItem("token")),A.commit("SET_TOKEN",window.localStorage.getItem("token")));var P=O,b=(n("uk03"),n("UfKn"),n("VISM"),{render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("el-container",[e("router-view")],1)],1)},staticRenderFns:[]});var y=n("Z0/y")({name:"App"},b,!1,function(t){n("9Y0D")},null,null).exports,N=n("lJzc"),k=n.n(N);if(r.default.prototype.$API=E,r.default.use(k.a,{error:n("FF+y"),loading:n("F7NO")}),r.default.use(v.a),r.default.config.productionTip=!1,!localStorage.getItem("equipId")){var M=new Date,U=M.getDate(),L=M.getMonth()+1,H=M.getFullYear();L=L<10?"0"+L:L,U=U<10?"0"+U:U;var R=M.getHours();R=R<10?"0"+R:R;var F=M.getMinutes();F=F<10?"0"+F:F;var K=M.getSeconds(),D=H+L+U+R+F+(K=K<10?"0"+K:K)+Math.random().toString(32).substr(2).slice(0,6);localStorage.setItem("equipId",D)}new r.default({el:"#app",router:P,store:A,components:{App:y},template:"<App/>"})},UfKn:function(t,e){},VISM:function(t,e){},uk03:function(t,e){}},[0]);